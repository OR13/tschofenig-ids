<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.9 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY I-D.ietf-tls-certificate-compression SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-tls-certificate-compression.xml">
<!ENTITY I-D.tschofenig-tls-cwt SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.tschofenig-tls-cwt.xml">
<!ENTITY I-D.rescorla-tls-ctls SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.rescorla-tls-ctls.xml">
<!ENTITY RFC7924 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7924.xml">

]>

<?rfc rfcedstyle="yes"?>
<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc text-list-symbols="-o*+"?>
<?rfc docmapping="yes"?>

<rfc ipr="pre5378Trust200902" docName="draft-barnes-tls-key-id-00" category="std">

  <front>
    <title abbrev="KeyIDs in TLS/DTLS">Key IDs in Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)</title>
    <author initials="R." surname="Barnes" fullname="Richard Barnes">
      <organization>Cisco</organization>
      <address>
        <email>rlb@ipv.sx</email>
      </address>
    </author>
    <author initials="E." surname="Rescorla" fullname="Eric Rescorla">
      <organization>Mozilla</organization>
      <address>
        <email>ekr@mozilla.com</email>
      </address>
    </author>
    <author initials="H." surname="Tschofenig" fullname="Hannes Tschofenig">
      <organization>Arm Limited</organization>
      <address>
        <email>hannes.tschofenig@arm.com</email>
      </address>
    </author>


    <date year="2019" month="November" day="04"/>

    <area>Security</area>
    <workgroup>TLS</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>

   <t>In TLS handshakes, certificates often take up the majority of
   the bytes transmitted.</t>

   <t>This document describes how the size of certificate transmissions can be 
reduced by utilizing key ids. This approach is useful when certificates and certificate chains 
have been pre-provisioned out-of-band between clients and servers.</t> 
   


    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

  <t>When TLS is used with certificate-based authentication then the exchanged 
  certificates, particularly when mutual certificate-based authentication is used, 
  requires a fair amount of bandwidth. In certain deployment situations these 
  certificates do, however, not need to be exchanged with every handshake because 
  they rarely change or are known in advance by the communication partners.</t> 
  
  <t>
   In order to reduce latency and over-the-wire/over-the-air overhead it can be useful
   to reduce the amount of data exchanged during a TLS handshake.
   </t>

  <t>There have been prior attempts to reduce the certificate overhead, namely 
  
  <list style="symbols">
    <t>TLS Cached Info <xref target="RFC7924"/> describes a mechanism that allows a client and a server to
     avoid transmitting certificates already shared in an earlier
     handshake.</t>
    <t>Certificate compression <xref target="I-D.ietf-tls-certificate-compression"/> specifies a mechanism to 
    compress certificates using zlib, brotli and zstd.
    </t>
    <t>Various specifications have defined alternative certificate formats for use in TLS. For example, <xref target="I-D.tschofenig-tls-cwt"/> defines how to use a CBOR Web Token (CWT) in TLS as an alternative to an X.5090-based certificate.</t> 
  </list> 
  </t> 
 
   <t>
   This document describes a mechanism that allows certificates to be referenced using a key id. 
   </t>

</section>
<section anchor="conventions-and-terminology" title="Conventions and Terminology">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in RFC 2119 <xref target="RFC2119"/>.</t>

</section>
<section anchor="the-cwt-certificate-type" title="The CWT Certificate Type">

<t>This document defines a new value to the “TLS Certificate Types” sub-registry and 
the value is defined as follows.</t>

<figure><artwork><![CDATA[
     /* Managed by IANA */
      enum {
          X509(0),
          RawPublicKey(2),
          KeyID(TBD),
          (255)
      } CertificateType;

      struct {
         varint key_id;
      } KeyIdCertificate;
      
      struct {
          select (certificate_type) {

              /* CWT "certificate type" defined in this document.*/
              case KeyID:
                 opaque cwt_data<1..2^24-1>;

              case key_id:
                 KeyIdCertificate;
                  
               /* RawPublicKey defined in RFC 7250*/
              case RawPublicKey:
                 opaque ASN.1_subjectPublicKeyInfo<1..2^24-1>;

              /* X.509 certificate defined in RFC 5246*/
              case X.509:
                 opaque cert_data<1..2^24-1>;

               };

             Extension extensions<0..2^16-1>;
      } CertificateEntry;
]]></artwork></figure>

<t>The varint type is defined in <xref target="I-D.rescorla-tls-ctls"/>.</t> 

</section>
<section anchor="sec-cons" title="Security and Privacy Considerations">

  <t>The transmission of key ids instead of certificates
   provides benefits by lowering the over-the-air transmission overhead
   since key ids are significantly smaller than entire certificates.
   </t> 
   
   <t>This document does not mandate the size of the key ids. A possible 
   construction is to use a SHA256 hash and truncate it to 64 bits.</t>
   
   <t>While out-of-band configuration of certificates and key ids are not 
   are not suitable for a generic Web-based environment, key ids are a 
   reasonable approach for many Internet of Things deployments where 
   there is a close relationship between the
   software running on the device and the server-side communication
   endpoint.</t>

<t>When Key IDs are used with TLS 1.3 <xref target="RFC8446"/> and DTLS 1.3 <xref target="I-D.ietf-tls-dtls13"/>
additional privacy properties are provided since most handshake messages are encrypted.
Hence, Key IDs used in version 1.3 provide better privacy benefits than in version 1.2.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>IANA is requested to add a new value to the “TLS Certificate Types” sub-registry 
for Key IDs.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference anchor="I-D.ietf-tls-dtls13">
<front>
<title>The Datagram Transport Layer Security (DTLS) Protocol Version 1.3</title>

<author initials='E' surname='Rescorla' fullname='Eric Rescorla'>
    <organization />
</author>

<author initials='H' surname='Tschofenig' fullname='Hannes Tschofenig'>
    <organization />
</author>

<author initials='N' surname='Modadugu' fullname='Nagendra Modadugu'>
    <organization />
</author>

<date month='October' day='11' year='2019' />

<abstract><t>This document specifies Version 1.3 of the Datagram Transport Layer Security (DTLS) protocol.  DTLS 1.3 allows client/server applications to communicate over the Internet in a way that is designed to prevent eavesdropping, tampering, and message forgery.  The DTLS 1.3 protocol is intentionally based on the Transport Layer Security (TLS) 1.3 protocol and provides equivalent security guarantees.  Datagram semantics of the underlying transport are preserved by the DTLS protocol.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-tls-dtls13-33' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-tls-dtls13-33.txt' />
</reference>



<reference  anchor="RFC8446" target='https://www.rfc-editor.org/info/rfc8446'>
<front>
<title>The Transport Layer Security (TLS) Protocol Version 1.3</title>
<author initials='E.' surname='Rescorla' fullname='E. Rescorla'><organization /></author>
<date year='2018' month='August' />
<abstract><t>This document specifies version 1.3 of the Transport Layer Security (TLS) protocol.  TLS allows client/server applications to communicate over the Internet in a way that is designed to prevent eavesdropping, tampering, and message forgery.</t><t>This document updates RFCs 5705 and 6066, and obsoletes RFCs 5077, 5246, and 6961.  This document also specifies new requirements for TLS 1.2 implementations.</t></abstract>
</front>
<seriesInfo name='RFC' value='8446'/>
<seriesInfo name='DOI' value='10.17487/RFC8446'/>
</reference>



<reference  anchor="RFC7250" target='https://www.rfc-editor.org/info/rfc7250'>
<front>
<title>Using Raw Public Keys in Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)</title>
<author initials='P.' surname='Wouters' fullname='P. Wouters' role='editor'><organization /></author>
<author initials='H.' surname='Tschofenig' fullname='H. Tschofenig' role='editor'><organization /></author>
<author initials='J.' surname='Gilmore' fullname='J. Gilmore'><organization /></author>
<author initials='S.' surname='Weiler' fullname='S. Weiler'><organization /></author>
<author initials='T.' surname='Kivinen' fullname='T. Kivinen'><organization /></author>
<date year='2014' month='June' />
<abstract><t>This document specifies a new certificate type and two TLS extensions for exchanging raw public keys in Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS).  The new certificate type allows raw public keys to be used for authentication.</t></abstract>
</front>
<seriesInfo name='RFC' value='7250'/>
<seriesInfo name='DOI' value='10.17487/RFC7250'/>
</reference>




    </references>

    <references title='Informative References'>





&I-D.ietf-tls-certificate-compression; 
&I-D.tschofenig-tls-cwt; 
&RFC7924; 
&I-D.rescorla-tls-ctls;
    </references>


<section anchor="history" title="History">

<t>RFC EDITOR: PLEASE REMOVE THE THIS SECTION</t>

<t><list style="symbols">

  <t>-00: Initial version</t>
</list></t>

</section>
<section anchor="working-group-information" title="Working Group Information">

<t>The discussion list for the IETF TLS working group is located at the e-mail
address <eref target="mailto:tls@ietf.org">tls@ietf.org</eref>. Information on the group and information on how to
subscribe to the list is at <eref target="https://www1.ietf.org/mailman/listinfo/tls">https://www1.ietf.org/mailman/listinfo/tls</eref></t>

<t>Archives of the list can be found at:
<eref target="https://www.ietf.org/mail-archive/web/tls/current/index.html">https://www.ietf.org/mail-archive/web/tls/current/index.html</eref></t>

</section>


  </back>


</rfc>

